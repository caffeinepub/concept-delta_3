{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 29,
  "summary": "Responsive MHT-CET test series website named 'Concept Delta' with Navy Blue/White minimal theme. Includes Home Page, Dashboard, Test Page, and Admin Panel. Uses Google Login auth with user profile collection. Backend with database for users, tests, questions, and results.",
  "architectural_notes": [
    "Navy Blue primary color, White background, modern minimal UI across all pages",
    "Google OAuth for authentication; post-login profile collection (name, class, contact)",
    "Simple backend with database (MVP structure); mobile-responsive design required",
    "Admin panel protected route — accessible only to admin users",
    "Questions stored as uploaded images; tests composed by selecting from question gallery"
  ],
  "known_issues": [
    "Admin button/link not visible on home screen for admin users",
    "Onboarding form (profile setup modal) background is not solid — needs a solid dark/white background for visibility",
    "Test submission always shows score as 0 — score calculation is broken",
    "Post-submission screen on Test Page has a transparent background — needs solid dark/white background for readability",
    "Test Page: question+options images load slowly after test starts — needs pre-fetching/caching for instant display",
    "Test Page: test submission is slow — needs optimization for faster response"
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-design-and-apply-a-consistent-navy-blue-0a1f44-and-white-visual-theme-across-all-pages-with-modern-minimal-ui-clean-sans-serif-typography-generous-whitespace-and-fully-mobile-responsive-layouts-using-tailwind-css",
      "title": "Design and apply a consistent Navy Blue (#0A1F44) and White visual theme across all pages with modern minimal UI, clean sans-serif typography, generous whitespace, and fully mobile-responsive layouts using Tailwind CSS.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-build-the-home-page-with-1-a-navbar-containing-a-triangular-delta-logo-and-concept-delta-brand-name-on-the-left-and-an-internet-identity-login-button-on-the-top-right-2-a-hero-section-with-heading-free-mht-cet-mock-tests-subheading-created-by-coepians-coep-technological-university-one-of-the-top-engineering-colleges-in-maharashtra-and-student-focused-copy-about-smart-practice-and-free-mock-tests-3-a-large-cta-button-start-practicing-now-4-a-telegram-button-linking-to-https-t-me-conceptdelta-labeled-short-notes-free-test-series-5-a-youtube-button-linking-to-https-youtube-com-conceptdelta2026-labeled-more-guidance-on-youtube",
      "title": "Build the Home Page with: (1) a Navbar containing a triangular delta logo and 'Concept Delta' brand name on the left, and an Internet Identity login button on the top right; (2) a hero section with heading 'Free MHT-CET Mock Tests', subheading 'Created by COEPians – COEP Technological University, one of the top engineering colleges in Maharashtra', and student-focused copy about smart practice and free mock tests; (3) a large CTA button 'Start Practicing Now'; (4) a Telegram button linking to https://t.me/Conceptdelta labeled 'Short Notes & Free Test Series'; (5) a YouTube button linking to https://youtube.com/@conceptdelta2026 labeled 'More Guidance on YouTube'.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-internet-identity-authentication-after-a-user-logs-in-for-the-first-time-show-a-profile-completion-form-asking-for-full-name-text-class-dropdown-11th-12th-dropper-and-contact-number-numeric-on-submission-save-the-profile-to-the-backend-and-redirect-to-the-dashboard",
      "title": "Implement Internet Identity authentication. After a user logs in for the first time, show a profile completion form asking for: Full Name (text), Class (dropdown: 11th / 12th / Dropper), and Contact Number (numeric). On submission, save the profile to the backend and redirect to the Dashboard.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-build-the-dashboard-page-authenticated-users-only-that-fetches-and-displays-all-published-tests-as-cards-each-card-must-show-test-name-duration-in-minutes-and-a-start-test-button-that-navigates-to-the-test-page-for-that-test",
      "title": "Build the Dashboard page (authenticated users only) that fetches and displays all published tests as cards. Each card must show: Test Name, Duration (in minutes), and a 'Start Test' button that navigates to the Test Page for that test.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-build-the-test-page-fetch-the-test-and-its-questions-by-test-id-from-the-url-display-1-a-top-bar-with-a-countdown-timer-from-test-duration-and-a-submit-test-button-2-one-question-at-a-time-showing-the-question-options-image-filling-the-full-viewport-width-max-height-constrained-so-the-image-is-always-fully-visible-on-mobile-and-desktop-without-scrolling-when-possible-3-four-clickable-answer-buttons-labeled-a-b-c-d-below-the-image-for-the-current-question-4-navigation-to-move-between-questions-5-auto-submit-when-the-timer-reaches-zero-6-a-post-submission-screen-showing-the-score-and-a-message-join-our-telegram-for-detailed-explanations-https-t-me-conceptdelta",
      "title": "Build the Test Page. Fetch the test and its questions by test ID from the URL. Display: (1) a top bar with a countdown timer (from test duration) and a 'Submit Test' button; (2) one question at a time showing the question+options image filling the full viewport width (max-height constrained so the image is always fully visible on mobile and desktop without scrolling when possible); (3) four clickable answer buttons labeled A, B, C, D below the image for the current question; (4) navigation to move between questions; (5) auto-submit when the timer reaches zero; (6) a post-submission screen showing the score and a message: 'Join our Telegram for detailed explanations: https://t.me/Conceptdelta'.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-build-the-admin-panel-page-accessible-only-to-users-with-isadmin-true-include-four-tabs-or-sections-1-question-gallery-upload-question-options-image-from-device-gallery-select-correct-answer-a-b-c-d-save-question-display-all-saved-questions-as-a-grid-with-their-correct-answer-badge-2-test-builder-create-a-new-test-by-entering-a-name-and-duration-then-selecting-questions-from-the-question-gallery-save-the-test-3-test-management-list-all-tests-with-a-publish-unpublish-toggle-switch-4-users-display-a-table-of-all-registered-users-with-columns-name-email-principal-class-contact-5-results-display-a-table-of-all-test-results-with-columns-username-test-name-score",
      "title": "Build the Admin Panel page, accessible only to users with isAdmin = true. Include four tabs or sections: (1) Question Gallery – upload question+options image from device gallery, select correct answer (A/B/C/D), save question; display all saved questions as a grid with their correct answer badge; (2) Test Builder – create a new test by entering a name and duration, then selecting questions from the question gallery; save the test; (3) Test Management – list all tests with a publish/unpublish toggle switch; (4) Users – display a table of all registered users with columns: Name, Email (principal), Class, Contact; (5) Results – display a table of all test results with columns: Username, Test Name, Score.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-client-side-routing-with-protected-routes-home-public-dashboard-authenticated-users-test-testid-authenticated-users-admin-admin-only-redirect-unauthenticated-users-to-and-non-admin-users-away-from-admin",
      "title": "Implement client-side routing with protected routes: '/' (Home, public), '/dashboard' (authenticated users), '/test/:testId' (authenticated users), '/admin' (admin only). Redirect unauthenticated users to '/' and non-admin users away from '/admin'.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-audit-and-update-the-home-page-homepage-tsx-to-strictly-apply-the-navy-blue-0a1f44-and-white-theme-use-0a1f44-as-the-primary-background-for-the-navbar-and-hero-section-white-for-body-card-backgrounds-white-or-light-grey-text-on-dark-navy-surfaces-and-navy-text-on-white-surfaces-ensure-all-buttons-cta-telegram-youtube-use-the-navy-white-palette-with-clean-hover-states-remove-any-off-theme-accent-colors",
      "title": "Audit and update the Home Page (HomePage.tsx) to strictly apply the Navy Blue (#0A1F44) and White theme: use #0A1F44 as the primary background for the navbar and hero section, white for body/card backgrounds, white or light-grey text on dark navy surfaces, and navy text on white surfaces. Ensure all buttons (CTA, Telegram, YouTube) use the navy/white palette with clean hover states. Remove any off-theme accent colors.",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-audit-and-update-the-dashboard-page-dashboardpage-tsx-and-testcard-component-testcard-tsx-to-strictly-apply-the-navy-blue-0a1f44-and-white-minimal-theme-white-page-background-navy-headings-and-labels-test-cards-with-white-background-and-a-subtle-navy-border-or-shadow-and-the-start-test-button-in-solid-0a1f44-with-white-text-loading-skeletons-should-use-light-grey-tones-consistent-with-the-palette",
      "title": "Audit and update the Dashboard page (DashboardPage.tsx) and TestCard component (TestCard.tsx) to strictly apply the Navy Blue (#0A1F44) and White minimal theme: white page background, navy headings and labels, test cards with white background and a subtle navy border or shadow, and the 'Start Test' button in solid #0A1F44 with white text. Loading skeletons should use light-grey tones consistent with the palette.",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-audit-and-update-the-admin-panel-page-adminpage-tsx-and-all-its-sub-components-questiongallery-tsx-testbuilder-tsx-testmanagement-tsx-userstab-tsx-resultstab-tsx-to-strictly-apply-the-navy-blue-0a1f44-and-white-minimal-theme-white-page-card-backgrounds-navy-tab-labels-active-tab-highlighted-with-solid-navy-background-and-white-text-navy-table-headers-and-all-action-buttons-upload-save-toggle-delete-using-the-navy-white-palette",
      "title": "Audit and update the Admin Panel page (AdminPage.tsx) and all its sub-components (QuestionGallery.tsx, TestBuilder.tsx, TestManagement.tsx, UsersTab.tsx, ResultsTab.tsx) to strictly apply the Navy Blue (#0A1F44) and White minimal theme: white page/card backgrounds, navy tab labels (active tab highlighted with solid navy background and white text), navy table headers, and all action buttons (upload, save, toggle, delete) using the navy/white palette.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-navbar-navbar-tsx-is-consistent-across-all-pages-home-dashboard-and-admin-with-a-sticky-0a1f44-background-white-concept-delta-brand-text-and-delta-logo-white-nav-links-dashboard-admin-and-a-white-outlined-internet-identity-login-logout-button-mobile-hamburger-menu-should-also-follow-the-navy-white-palette",
      "title": "Ensure the Navbar (Navbar.tsx) is consistent across all pages — Home, Dashboard, and Admin — with a sticky #0A1F44 background, white 'Concept Delta' brand text and delta logo, white nav links (Dashboard, Admin), and a white-outlined Internet Identity login/logout button. Mobile hamburger menu should also follow the navy/white palette.",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-home-page-homepage-tsx-hero-section-and-navbar-to-match-the-following-spec-exactly-1-navbar-triangular-delta-logo-concept-delta-brand-name-on-the-left-internet-identity-login-button-on-the-top-right-no-google-login-the-platform-uses-internet-identity-2-hero-heading-free-mht-cet-mock-tests-3-hero-subheading-created-by-coepians-coep-technological-university-one-of-the-top-engineering-colleges-in-maharashtra-4-student-focused-body-copy-highlighting-smart-practice-free-mock-tests-and-exam-readiness-5-large-cta-button-labeled-start-practicing-now-that-navigates-to-the-dashboard-6-a-telegram-button-labeled-short-notes-free-test-series-linking-to-https-t-me-conceptdelta-7-a-youtube-button-labeled-more-guidance-on-youtube-linking-to-https-youtube-com-conceptdelta2026-all-elements-must-use-the-existing-navy-blue-0a1f44-and-white-theme",
      "title": "Update the Home Page (HomePage.tsx) hero section and navbar to match the following spec exactly: (1) Navbar: triangular delta logo + 'Concept Delta' brand name on the left, Internet Identity login button on the top right (no Google Login — the platform uses Internet Identity); (2) Hero heading: 'Free MHT-CET Mock Tests'; (3) Hero subheading: 'Created by COEPians – COEP Technological University, one of the top engineering colleges in Maharashtra'; (4) Student-focused body copy highlighting smart practice, free mock tests, and exam readiness; (5) Large CTA button labeled 'Start Practicing Now' that navigates to the dashboard; (6) A Telegram button labeled 'Short Notes & Free Test Series' linking to https://t.me/Conceptdelta; (7) A YouTube button labeled 'More Guidance on YouTube' linking to https://youtube.com/@conceptdelta2026. All elements must use the existing Navy Blue (#0A1F44) and White theme.",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-build-the-test-page-frontend-src-pages-testpage-tsx-fetch-the-test-and-its-questions-by-test-id-from-the-url-display-a-top-bar-with-a-countdown-timer-counting-down-from-the-test-duration-in-minutes-and-a-submit-test-button-show-one-question-at-a-time-as-a-question-options-image-that-fills-the-full-viewport-width-with-a-max-height-constraint-so-the-image-is-always-fully-visible-on-both-mobile-and-desktop-without-scrolling-when-possible-render-four-clickable-answer-buttons-labeled-a-b-c-d-below-the-image-for-the-current-question-include-previous-next-navigation-to-move-between-questions-auto-submit-when-the-timer-reaches-zero-after-submission-show-a-post-submission-screen-displaying-the-score-and-the-message-join-our-telegram-for-detailed-explanations-https-t-me-conceptdelta-all-ui-must-use-the-navy-blue-0a1f44-and-white-theme",
      "title": "Build the Test Page (frontend/src/pages/TestPage.tsx): fetch the test and its questions by test ID from the URL. Display a top bar with a countdown timer (counting down from the test duration in minutes) and a 'Submit Test' button. Show one question at a time as a question+options image that fills the full viewport width with a max-height constraint so the image is always fully visible on both mobile and desktop without scrolling when possible. Render four clickable answer buttons labeled A, B, C, D below the image for the current question. Include previous/next navigation to move between questions. Auto-submit when the timer reaches zero. After submission, show a post-submission screen displaying the score and the message: 'Join our Telegram for detailed explanations: https://t.me/Conceptdelta'. All UI must use the Navy Blue (#0A1F44) and White theme.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-admin-panel-access-flow-in-the-frontend-so-that-the-admin-route-and-the-adminpage-are-only-accessible-on-the-user-s-first-visit-to-the-admin-panel-after-the-admin-successfully-loads-the-admin-page-for-the-first-time-call-markadminvisited-on-the-backend-on-any-subsequent-navigation-to-admin-if-hasadminbeenvisited-returns-true-redirect-the-user-to-the-dashboard-dashboard-with-a-toast-or-inline-message-explaining-that-the-admin-panel-is-only-accessible-on-first-login",
      "title": "Update the Admin Panel access flow in the frontend so that the `/admin` route and the AdminPage are only accessible on the user's **first** visit to the admin panel. After the admin successfully loads the admin page for the first time, call `markAdminVisited()` on the backend. On any subsequent navigation to `/admin`, if `hasAdminBeenVisited()` returns `true`, redirect the user to the dashboard (`/dashboard`) with a toast or inline message explaining that the admin panel is only accessible on first login.",
      "reqIds": [
        "REQ-17"
      ],
      "version": 1
    },
    {
      "id": "feature-update-navbar-tsx-so-that-when-a-user-is-authenticated-the-navbar-displays-navigation-links-for-home-dashboard-and-visible-only-to-users-with-isadmin-true-admin-the-admin-link-must-be-hidden-from-non-admin-authenticated-users-and-from-unauthenticated-visitors-all-links-must-follow-the-existing-navy-blue-0a1f44-and-white-theme-white-text-on-the-navy-background-with-a-hover-active-highlight-consistent-with-the-current-navbar-style",
      "title": "Update Navbar.tsx so that when a user is authenticated, the navbar displays navigation links for 'Home', 'Dashboard', and — visible only to users with isAdmin = true — 'Admin'. The 'Admin' link must be hidden from non-admin authenticated users and from unauthenticated visitors. All links must follow the existing Navy Blue (#0A1F44) and White theme: white text on the navy background, with a hover/active highlight consistent with the current navbar style.",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-navbar-tsx-so-that-it-renders-correctly-on-the-home-page-route-the-navbar-must-always-display-the-triangular-delta-logo-and-concept-delta-brand-name-on-the-left-a-login-button-when-unauthenticated-or-logout-button-when-authenticated-on-the-right-and-when-authenticated-nav-links-for-home-and-dashboard-plus-admin-only-for-users-with-isadmin-true-ensure-navbar-tsx-is-imported-and-rendered-in-the-root-layout-app-tsx-or-equivalent-so-it-appears-on-every-page-including-the-home-screen-debug-and-resolve-any-conditional-rendering-auth-state-initialization-or-import-issue-that-prevents-the-navbar-and-its-buttons-from-appearing-on-first-load-of-the-home-screen",
      "title": "Fix Navbar.tsx so that it renders correctly on the Home page ('/' route). The navbar must always display: the triangular delta logo and 'Concept Delta' brand name on the left; a Login button (when unauthenticated) or Logout button (when authenticated) on the right; and — when authenticated — nav links for 'Home' and 'Dashboard', plus 'Admin' only for users with isAdmin = true. Ensure Navbar.tsx is imported and rendered in the root layout (App.tsx or equivalent) so it appears on every page including the home screen. Debug and resolve any conditional rendering, auth-state initialization, or import issue that prevents the navbar and its buttons from appearing on first load of the home screen.",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-navbar-tsx-so-that-the-admin-navigation-link-is-visible-on-the-home-page-route-for-authenticated-users-with-isadmin-true-the-admin-link-must-appear-in-both-the-desktop-nav-and-the-mobile-hamburger-menu-whenever-the-authenticated-user-s-profile-has-isadmin-true-regardless-of-the-current-route-audit-the-auth-state-and-profile-loading-logic-in-navbar-tsx-to-ensure-isadmin-is-correctly-read-from-the-user-profile-and-is-not-lost-or-reset-on-the-home-route-the-fix-must-not-affect-visibility-rules-for-non-admin-users-admin-link-must-remain-hidden-from-them",
      "title": "Fix Navbar.tsx so that the 'Admin' navigation link is visible on the Home page ('/' route) for authenticated users with isAdmin = true. The Admin link must appear in both the desktop nav and the mobile hamburger menu whenever the authenticated user's profile has isAdmin = true, regardless of the current route. Audit the auth state and profile loading logic in Navbar.tsx to ensure isAdmin is correctly read from the user profile and is not lost or reset on the Home route. The fix must not affect visibility rules for non-admin users (Admin link must remain hidden from them).",
      "reqIds": [
        "REQ-20"
      ],
      "version": 1
    },
    {
      "id": "feature-complete-the-admin-panel-page-frontend-src-pages-adminpage-tsx-and-all-its-sub-components-to-ensure-all-five-tabs-are-fully-functional-1-question-gallery-upload-question-options-image-from-device-select-correct-answer-a-b-c-d-save-question-display-all-saved-questions-as-a-grid-with-correct-answer-badge-and-support-deleting-a-question-2-test-builder-create-a-new-test-by-entering-a-name-and-duration-in-minutes-select-questions-from-the-question-gallery-grid-and-save-the-test-3-test-management-list-all-tests-with-name-duration-question-count-and-a-publish-unpublish-toggle-switch-4-users-display-a-paginated-scrollable-table-of-all-registered-users-with-columns-name-principal-class-contact-5-results-display-a-table-of-all-test-results-with-columns-username-test-name-score-with-percentage-all-tabs-must-use-the-navy-blue-0a1f44-and-white-theme-white-page-card-backgrounds-navy-tab-labels-active-tab-with-solid-navy-background-and-white-text-navy-table-headers-and-all-action-buttons-using-the-navy-white-palette",
      "title": "Complete the Admin Panel page (frontend/src/pages/AdminPage.tsx) and all its sub-components to ensure all five tabs are fully functional: (1) Question Gallery — upload question+options image from device, select correct answer (A/B/C/D), save question, display all saved questions as a grid with correct answer badge, and support deleting a question; (2) Test Builder — create a new test by entering a name and duration in minutes, select questions from the question gallery grid, and save the test; (3) Test Management — list all tests with name, duration, question count, and a publish/unpublish toggle switch; (4) Users — display a paginated/scrollable table of all registered users with columns: Name, Principal, Class, Contact; (5) Results — display a table of all test results with columns: Username, Test Name, Score (with percentage). All tabs must use the Navy Blue (#0A1F44) and White theme: white page/card backgrounds, navy tab labels, active tab with solid navy background and white text, navy table headers, and all action buttons using the navy/white palette.",
      "reqIds": [
        "REQ-21"
      ],
      "version": 1
    },
    {
      "id": "feature-the-platform-does-not-support-google-login-the-authentication-system-must-use-internet-identity-already-implemented-via-useinternetidentity-ts-and-the-existing-internetidentityprovider-remove-any-references-to-google-login-from-the-codebase-including-the-home-page-navbar-login-button-any-google-oauth-configuration-and-any-ui-copy-mentioning-google-replace-all-such-references-with-the-existing-internet-identity-login-flow-login-logout-via-useinternetidentity-hook",
      "title": "The platform does not support Google Login. The authentication system must use Internet Identity (already implemented via useInternetIdentity.ts and the existing InternetIdentityProvider). Remove any references to Google Login from the codebase — including the Home Page navbar login button, any Google OAuth configuration, and any UI copy mentioning Google. Replace all such references with the existing Internet Identity login flow (login/logout via useInternetIdentity hook).",
      "reqIds": [
        "REQ-23"
      ],
      "version": 1
    },
    {
      "id": "feature-after-a-user-authenticates-via-internet-identity-for-the-first-time-i-e-their-profile-does-not-yet-exist-in-the-backend-display-the-existing-profilesetupmodal-collecting-full-name-text-required-class-dropdown-11th-12th-dropper-required-and-contact-number-numeric-required-on-submission-call-the-backend-registeruser-saveprofile-function-to-persist-the-profile-data-then-redirect-the-user-to-dashboard-this-flow-already-exists-in-profilesetupmodal-tsx-verify-it-is-correctly-wired-to-the-internet-identity-auth-state-and-that-the-backend-call-succeeds-fix-any-broken-integration",
      "title": "After a user authenticates via Internet Identity for the first time (i.e., their profile does not yet exist in the backend), display the existing ProfileSetupModal collecting: Full Name (text, required), Class (dropdown: 11th / 12th / Dropper, required), and Contact Number (numeric, required). On submission, call the backend registerUser/saveProfile function to persist the profile data, then redirect the user to /dashboard. This flow already exists in ProfileSetupModal.tsx — verify it is correctly wired to the Internet Identity auth state and that the backend call succeeds. Fix any broken integration.",
      "reqIds": [
        "REQ-24"
      ],
      "version": 1
    },
    {
      "id": "feature-update-profilesetupmodal-tsx-so-the-modal-overlay-uses-a-solid-dark-background-e-g-rgba-0-0-0-0-85-or-bg-gray-900-and-the-modal-card-itself-uses-a-solid-white-background-ffffff-with-navy-0a1f44-text-remove-any-semi-transparent-or-translucent-background-styles-that-cause-the-underlying-page-content-to-show-through-the-modal-making-the-form-fields-and-labels-unreadable",
      "title": "Update ProfileSetupModal.tsx so the modal overlay uses a solid dark background (e.g. rgba(0,0,0,0.85) or bg-gray-900) and the modal card itself uses a solid white background (#FFFFFF) with navy (#0A1F44) text. Remove any semi-transparent or translucent background styles that cause the underlying page content to show through the modal, making the form fields and labels unreadable.",
      "reqIds": [
        "REQ-25"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-test-score-calculation-bug-in-testpage-tsx-and-the-backend-submittestresult-function-so-that-the-score-correctly-reflects-the-number-of-questions-answered-correctly-in-testpage-tsx-verify-that-the-answers-map-being-sent-to-the-backend-contains-the-user-s-actual-selected-options-keyed-by-question-id-valued-by-selected-answer-a-b-c-d-in-the-backend-submittestresult-function-backend-main-mo-verify-that-the-score-is-computed-by-comparing-each-submitted-answer-against-the-question-s-correctoption-field-iterating-over-all-submitted-answers-looking-up-the-corresponding-question-and-incrementing-the-score-counter-when-they-match-ensure-the-computed-score-is-stored-in-the-testresult-record-and-returned-correctly-fix-any-mismatch-between-the-answer-key-format-used-on-the-frontend-question-index-vs-question-id-and-the-lookup-key-used-in-the-backend",
      "title": "Fix the test score calculation bug in TestPage.tsx and the backend submitTestResult function so that the score correctly reflects the number of questions answered correctly. In TestPage.tsx, verify that the answers map being sent to the backend contains the user's actual selected options (keyed by question ID, valued by selected answer A/B/C/D). In the backend submitTestResult function (backend/main.mo), verify that the score is computed by comparing each submitted answer against the question's correctOption field — iterating over all submitted answers, looking up the corresponding question, and incrementing the score counter when they match. Ensure the computed score is stored in the TestResult record and returned correctly. Fix any mismatch between the answer key format used on the frontend (question index vs. question ID) and the lookup key used in the backend.",
      "reqIds": [
        "REQ-26"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-test-builder-tab-in-the-admin-panel-frontend-src-components-admin-testbuilder-tsx-to-include-two-numeric-input-fields-when-creating-a-test-marks-per-correct-answer-default-value-1-minimum-1-and-negative-marks-per-wrong-answer-default-value-0-minimum-0-both-fields-must-be-validated-positive-integers-only-and-their-values-must-be-passed-to-the-backend-createtest-call-style-both-fields-using-the-existing-navy-blue-0a1f44-and-white-theme-consistent-with-the-other-form-fields-in-testbuilder-tsx",
      "title": "Update the Test Builder tab in the Admin Panel (frontend/src/components/admin/TestBuilder.tsx) to include two numeric input fields when creating a test: 'Marks per Correct Answer' (default value: 1, minimum: 1) and 'Negative Marks per Wrong Answer' (default value: 0, minimum: 0). Both fields must be validated (positive integers only) and their values must be passed to the backend `createTest` call. Style both fields using the existing Navy Blue (#0A1F44) and White theme consistent with the other form fields in TestBuilder.tsx.",
      "reqIds": [
        "REQ-28"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-results-tab-in-the-admin-panel-frontend-src-components-admin-resultstab-tsx-and-the-test-result-page-frontend-src-pages-testresultpage-tsx-to-display-the-marks-based-score-e-g-14-20-marks-in-addition-to-or-instead-of-the-raw-correct-answer-count-fetch-and-display-the-markspercorrect-and-negativemarks-configuration-alongside-the-result-so-that-the-score-is-presented-in-the-context-of-the-marking-scheme",
      "title": "Update the Results tab in the Admin Panel (frontend/src/components/admin/ResultsTab.tsx) and the Test Result page (frontend/src/pages/TestResultPage.tsx) to display the marks-based score (e.g., '14 / 20 marks') in addition to or instead of the raw correct-answer count. Fetch and display the `marksPerCorrect` and `negativeMarks` configuration alongside the result so that the score is presented in the context of the marking scheme.",
      "reqIds": [
        "REQ-29"
      ],
      "version": 1
    },
    {
      "id": "feature-in-testpage-tsx-fix-the-submit-test-confirmation-dialog-modal-so-that-its-overlay-uses-a-solid-dark-background-e-g-rgba-0-0-0-0-85-or-bg-gray-900-and-the-dialog-card-itself-uses-a-solid-white-background-ffffff-with-navy-0a1f44-text-the-dialog-currently-renders-with-a-transparent-or-semi-transparent-background-causing-the-underlying-question-content-to-show-through-and-making-the-confirmation-text-submit-test-you-have-answered-x-out-of-y-questions-the-submit-now-button-and-the-continue-test-button-unreadable-remove-all-transparent-or-translucent-background-styles-from-the-confirmation-dialog-overlay-and-card",
      "title": "In TestPage.tsx, fix the 'Submit Test?' confirmation dialog/modal so that its overlay uses a solid dark background (e.g. rgba(0,0,0,0.85) or bg-gray-900) and the dialog card itself uses a solid white background (#FFFFFF) with navy (#0A1F44) text. The dialog currently renders with a transparent or semi-transparent background, causing the underlying question content to show through and making the confirmation text ('Submit Test?', 'You have answered X out of Y questions...'), the 'Submit Now' button, and the 'Continue Test' button unreadable. Remove all transparent or translucent background styles from the confirmation dialog overlay and card.",
      "reqIds": [
        "REQ-30"
      ],
      "version": 1
    },
    {
      "id": "feature-in-testpage-tsx-pre-fetch-and-cache-all-question-images-for-the-active-test-as-soon-as-the-test-data-is-loaded-before-the-user-sees-the-first-question-use-the-browser-s-image-constructor-to-pre-load-each-question-s-image-url-in-the-background-immediately-after-the-test-and-question-list-are-fetched-this-ensures-that-when-the-user-navigates-to-any-question-including-the-first-one-displayed-on-test-start-the-image-renders-instantly-without-a-visible-loading-delay",
      "title": "In TestPage.tsx, pre-fetch and cache all question images for the active test as soon as the test data is loaded (before the user sees the first question). Use the browser's Image constructor to pre-load each question's image URL in the background immediately after the test and question list are fetched. This ensures that when the user navigates to any question — including the first one displayed on test start — the image renders instantly without a visible loading delay.",
      "reqIds": [
        "REQ-31"
      ],
      "version": 1
    },
    {
      "id": "feature-optimize-the-test-submission-flow-in-testpage-tsx-to-minimize-perceived-and-actual-latency-when-the-user-confirms-submission-or-the-timer-expires-immediately-transition-the-ui-to-a-submitting-loading-state-so-the-user-receives-instant-visual-feedback-the-backend-call-to-submittestresult-must-be-the-only-async-operation-blocking-the-result-screen-eliminate-any-unnecessary-sequential-awaits-redundant-refetches-or-delays-before-the-post-submission-screen-is-shown-after-the-backend-responds-navigate-to-the-result-screen-without-additional-round-trips",
      "title": "Optimize the test submission flow in TestPage.tsx to minimize perceived and actual latency. When the user confirms submission (or the timer expires), immediately transition the UI to a 'Submitting…' loading state so the user receives instant visual feedback. The backend call to submitTestResult must be the only async operation blocking the result screen — eliminate any unnecessary sequential awaits, redundant refetches, or delays before the post-submission screen is shown. After the backend responds, navigate to the result screen without additional round-trips.",
      "reqIds": [
        "REQ-32"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Home Page: Navbar with triangular logo, Google Login button, hero heading/subheading, CTA button, Telegram and YouTube links",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Auth Flow: Google Login, post-login profile form (Full Name, Class, Contact), save user data to database",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Dashboard: Show published test cards with test name, duration, and Start Test button",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Test Page: Full-screen question+options image, clickable A/B/C/D answer buttons, top timer, submit button, auto-submit on timeout, post-submission Telegram message",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Admin Panel (admin-only): Upload question+options images, select correct option, manage question gallery, create tests from questions, publish toggle, view user list, view test results",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Build the backend data model with stable storage for: Users (principal, fullName, class, contactNumber, email, isAdmin), Questions (id, imageUrl, correctOption), Tests (id, name, durationMinutes, questionIds, isPublished), and TestResults (userId, testId, score, answers, submittedAt).",
      "reqIds": [
        "REQ-4"
      ],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Implement backend query and update functions: registerUser, getMyProfile, updateProfile, getPublishedTests, getTestById, submitTestResult, getMyResults (for users); and addQuestion, updateQuestion, deleteQuestion, getAllQuestions, createTest, updateTest, togglePublish, getAllUsers, getAllResults (for admin, guarded by isAdmin check).",
      "reqIds": [
        "REQ-5"
      ],
      "status": "pending"
    },
    {
      "id": "AR-11",
      "summary": "Admin panel should only be shown/accessible on first login (or first time accessing admin route)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-12",
      "summary": "In the backend, add a field `hasVisitedAdmin: Bool` (default `false`) to the User record. Expose a new update function `markAdminVisited()` that sets this flag to `true` for the calling principal (admin-only guard). Expose a query `hasAdminBeenVisited() : async Bool` that returns the current value for the caller.",
      "reqIds": [
        "REQ-16"
      ],
      "status": "pending"
    },
    {
      "id": "AR-13",
      "summary": "Navbar: show Home, Dashboard, and Admin (admin-only) navigation buttons/links for logged-in users; Admin link visible only to admin users",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-16",
      "summary": "Audit and verify the backend Motoko actor (backend/main.mo) to ensure all admin-required functions are implemented and exposed: getAllQuestions, addQuestion, deleteQuestion, createTest, updateTest, togglePublish, getAllUsers, getAllResults, markAdminVisited, and hasAdminBeenVisited. Each admin function must be guarded by an isAdmin check on the calling principal. If any of these functions are missing or incomplete, implement them with the appropriate guards and return types consistent with the existing data models (Questions, Tests, Users, TestResults).",
      "reqIds": [
        "REQ-22"
      ],
      "status": "pending"
    },
    {
      "id": "AR-17",
      "summary": "Onboarding/profile setup modal (Name, Class, Contact Number): use a solid dark/white background (not transparent) so it is clearly visible",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-18",
      "summary": "Fix bug: test submission always shows score as 0 instead of the correct calculated score",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-19",
      "summary": "Test Builder: add marks/scoring options when creating a test (e.g., marks per correct answer, negative marking) so that results are calculated using those marks",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-20",
      "summary": "Update the backend Test data model in backend/main.mo to add scoring configuration fields to each Test record: `marksPerCorrect: Int` (marks awarded for each correct answer, default 1) and `negativeMarks: Int` (marks deducted for each wrong answer, default 0, stored as a non-negative integer representing the deduction amount). Update the `createTest` and `updateTest` functions to accept these new fields. Update the `submitTestResult` function to calculate the score using these per-test marks values: for each submitted answer, add `marksPerCorrect` if correct, subtract `negativeMarks` if incorrect (and the question was answered). Store the final computed marks-based score in the TestResult record.",
      "reqIds": [
        "REQ-27"
      ],
      "status": "pending"
    },
    {
      "id": "AR-21",
      "summary": "Fix post-submission screen background on Test Page: make the background solid dark/white (not transparent) so the score and message are clearly visible",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-22",
      "summary": "Performance: Pre-load/cache question images so they display immediately when test starts; also speed up test submission to reduce wait time for users",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "Concept Delta",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}